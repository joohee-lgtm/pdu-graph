<head>
  <title>billboard.js</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.js"></script>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.css"
  />
</head>
<body>
  <div id="chart"></div>

  <script src="./rank/seasons2.js"></script>
  <script src="./rank/seasons3.js"></script>
  <script src="./rank/seasons4.js"></script>
  <script>
    window.addEventListener("load", () => {
      var data = {
        2: s2,
        3: s3,
        4: s4,
      };

      var season = window.location.search.match(/(?!\?season\=)[\d]/) || [4];
      var filtered = data[season[0]].filter((item) => {
        return item.length > 5;
      });

      var chart = document.querySelector("#chart");

      chart.style.width = `${window.innerWidth}`;
      chart.style.height = `${window.innerHeight - 100}`;

      var chart = bb.generate({
        data: {
          columns: filtered,
        },
        regions: [
          {
            axis: "y",
            start: 0,
            end: 10,
            class: "fill_green",
          },
        ],
        zoom: {
          enable: true,
        },
        axis: {
          x: {
            type: "category",
            categories: [
              "1회 직후",
              "1차 순발",
              "2차 순발",
              "3차 순발",
              "생방",
            ],
          },
          y: {
            inverted: true,
          },
        },
      });
    });
  </script>
</body>
